4.3 XML DTD声明 nn在XML中使用DTD有三种方式qq内部DTD（Internal Subset Declaration）：直接插入XML文档中和XML放在一起。qq外部DTD（External Subset Declaration）：使用外部独立的DTD文件。qq混合方式：同时使用上述两种方法，建立更为复杂的DTD。nnDTD声明以“<!DOCTYPE”开始，以“>”结束。4.3 XML DTD声明 nn内部DTD qqDTD在XML文档的序言区域中定义时，使用内部的DTD声明qq<!DOCTYPE 根元素[元素描述]> qq根元素指定DTD根元素名称，一个XML文档有且只有一个根元素qq如果XML文档中使用了DTD，则文档的根元素必须在DTD中指定 <?xml version=“1.0” ?> <!DOCTYPE 根元素[元素描述]> 文档数据区...... 4.3 XML DTD声明 nn内部DTD qq文档类型声明（DOCTYPE）通知解析器本XML文档需要与一个DTD文件一起使用qq在XML文档使用DTD时，DOCTYPE必须放在文档的开头，只允许XML声明语句在它前面qqDOCTYPE声明语句的第一个字符必须是“!”qqXML推荐标准规定，声明元素必须以“!”开头qq声明元素是DTD的一部分，不允许出现在XML主体内容中qq紧跟在DOCTYPE后面的是DTD定义的主体 4.3 XML DTD声明 nn内部DTD qq紧跟在DOCTYPE后面的是DTD定义的主体，声明元素、属性、实体和注释qq声明的元素组成了<name>文档的词汇qq“]>”是DTD声明的结束符，结束DTD文档类型定义，XML文档紧接其后 <!ELEMENT name (first, middle, last)> <!ELEMENT first (#PCDATA)> <!ELEMENT middle (#PCDATA)> <!ELEMENT last (#PCDATA)> 4.3 XML DTD声明 <?xml version=“1.0”?> <!DOCTYPE name [ <!ELEMENT name (first, middle, last)> <!ELEMENT first (#PCDATA)> <!ELEMENT middle (#PCDATA)> <!ELEMENT last (#PCDATA)> ]> <name> <first>John</first> <middle>Fitzgerald Johansen</middle> <last>Doe</last> </name> 4.3 XML DTD声明 <html> <body> <h3>This demonstrates a parser error:</h3> <script type="text/javascript"> varxmlDoc= new ActiveXObject("Microsoft.XMLDOM") xmlDoc.async="false" xmlDoc.validateOnParse="true" xmlDoc.load("./name2.xml") document.write("<br/>Error Code: ") document.write(xmlDoc.parseError.errorCode) document.write("<br/>Error Reason: ") document.write(xmlDoc.parseError.reason) document.write("<br/>Error Line: ") document.write(xmlDoc.parseError.line) </script> </body> </html>


4.4 DTD的语法 nn正则表达式qq一个正则表达式通常被称为一个模式（Pattern），为用来描述或者匹配一系列符合某个句法规则的字符串nnHandel, Händel和Haendel=H(a|ä|ae)ndelqq选择：竖直分隔符|代表选择nngray或grey=gray|greyqq匹配：圆括号()用来定义操作符的范围和优先度nngray|grey=gr(a|e)y, father和grandfather=(grand)?father 4.4 DTD的语法 nn正则表达式qq数量限定：某个字符后的数量限定符用来限定前面这个字符允许出现的个数。最常见的数量限定符包括“+”、“?”和“*”（不加数量限定则代表出现一次且仅出现一次）nn加号+代表前面的字符必须至少出现一次qqhello, helllo和hellllo等=hel+lonn问号?代表前面的字符最多只可以出现一次qqcolor或者colour=colou?rnn星号*代表前面的字符可以不出现，也可以出现一次或者多次qq42, 042, 0042和00042等=0*42 H(ae?|ä)ndel=H(a|ae|ä)ndel4.4 DTD的语法 nn正则表达式4.4 DTD的语法 nn正则表达式4.4 DTD的语法 nn元素内容模型qq元素内容nn元素名称表示XML的标记名nn类别指明XML中此元素包含的数据类型或内容nn将子元素列入到括号里nn一个元素在多个内容模型里出现，只需声明一次nnELEMENT声明的顺序不重要，但元素名必须与XML文档中的一致nn两种定义子元素的方法qq顺序组合qq选择组合<!ELEMENT 元素名称类别> <!ELEMENT 元素名称 （元素、内容）> <!ELEMENT contact (name)> <!ELEMENT contact (name, location, phone, knows, description)> 4.4 DTD的语法 nn元素内容模型qq元素内容nn顺序组合qq文档中的元素按照一定的顺序排列qq声明内容模型时，如果不止一个元素，必须使用顺序组合qqXML文档中顺序组合的元素出现的形式与ELEMENT声明中需一致<!ELEMENT name (first, middle, last)> 4.4 DTD的语法 nn元素内容模型qq元素内容nn选择组合qq需要从多个子元素中选择一个qq选择运算符|从多个选项中选且只选一个qq为空或含有多个子元素，解析器会报错nn混合使用两种组合<!ELEMENT location (address | (latitude, longitude))> <!ELEMENT location (working_address| home_address)> 4.4 DTD的语法 nn元素内容模型qq混合内容nn任何以文本为内容的元素是一个混合内容模型元素nn文本可以单独出现，也可与其他元素交错出现nn只含有文本的元素称为纯文本元素nnPCDATA（Parsed Character Data）表示文档中的字符数据需要解析


